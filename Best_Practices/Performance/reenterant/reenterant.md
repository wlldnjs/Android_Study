### Reentrant(재진입성)

함수형 프로그래밍의 핵심 개념으로써, 동일한 사본이 여러 사용자들에 의해 공유될수 있도록 작성된 컴퓨터 프로그램이나 루틴을 설명하기 위한 형용사입니다.

컴퓨터 프로그램 또는 서브루틴에 재진입성이 있으면, 이 서브루틴은 동시에(병렬로) 실행 가능합니다.</br>
즉 재진입이 가능한 서브루틴은 동시에 접근해도 언제나 같은 실행결과를 보장합니다. </br>
재진입이 가능하려면 함수는 다음 조건을 만족하여야 합니다.</br>

- 정적 (전역) 변수를 사용하면 안 된다.
- 정적 (전역) 변수의 주소를 반환하면 안 된다.
- 호출자가 호출 시 제공한 매개변수만으로 동작해야 한다.
- 싱글턴 객체의 잠금에 의존하면 안 된다.
- 다른 비-재진입 함수를 호출하면 안 된다.

</br>

####  재진입 불가 예제

``` c
Int g_var = 1;

Int f()
{
    g_var = g_var + 2;
    return g_var;
}

Int g()
{
    return f() + 2; 
}
```

위 코드에서 함수f는 전역변수 g_var을 참조하기 때문에 두개의 스레드가 이 함수를 동시에 접근하게 되면 결과는 실행되는 시점에 따라 바뀌게 됩니다.</br>
이때문에 f는 재진입성을 가지지 않는다고 합니다.</br>
g함수 또한 비 재진입 함수 f를 호출하기 때문에 재진입이 불가능 합니다.</br>

####  재진입 가능하게 변경된 예제

``` c
int f(int i)
{
  int priv = i;
  priv = priv + 2;
  return priv;
}

int g(int i)
{
  int priv = i;
  return f(priv) + 2;
}
```

> #### reenterant와 thread-safe의 차이

- thread-safe : 여러 스레드에 의해 코드가 실행되더라도 실행결과의 정확성이 보장되는 것
- reenterant : 여러 스레드가 코드를 동시에 실행할 수 있고, 실행결과의 정확성이 보장되는 것.


#### 재진입 과정

프로그램이 한 사용자를 위해 진입할때 마다 그 사용자를 위한 모든 변수 값들을 유지하기 위해 데이터 공간이 확보됩니다.</br>
프로그램 그 자체의 데이터 공간은 메모리의 또 다른 부분에 들어있습니다.</br>
다른 사용자에게 순서를 넘기기 위해 프로그램이 중단될 때, 그 사용자와 관련된 정보는 데이터공간에 저장됩니다.</br>
중단된 사용자의 프로그램이 다시 재개될 때,  데이터 공간에 저장된 정보가 복원되며, 그 프로그램은 프로그램 내의 다른 명령어가 변수값을 변경했을지도 모른다는 우려 없이 재진입할 수 있습니다.</br>


####

----

</br>

> ### 참고자료
* [재진입성](https://ko.wikipedia.org/wiki/%EC%9E%AC%EC%A7%84%EC%9E%85%EC%84%B1) for 위키백과
* [Reentrant 와 Thread-safe 의 차이](http://yesarang.tistory.com/214) for tistory 김윤수
